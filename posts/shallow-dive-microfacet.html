<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Shallow Dive on Microfacet</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.a7a650b7.css" as="style"><link rel="preload" href="/assets/js/app.16e6993d.js" as="script"><link rel="preload" href="/assets/js/6.5200d407.js" as="script"><link rel="preload" href="/assets/js/1.ed51565e.js" as="script"><link rel="preload" href="/assets/js/2.7fd9a54f.js" as="script"><link rel="preload" href="/assets/js/7.2a97dcdd.js" as="script"><link rel="prefetch" href="/assets/js/10.7c5e8cee.js"><link rel="prefetch" href="/assets/js/11.66252696.js"><link rel="prefetch" href="/assets/js/12.51b33934.js"><link rel="prefetch" href="/assets/js/13.9aa85bfc.js"><link rel="prefetch" href="/assets/js/14.6e5d83c4.js"><link rel="prefetch" href="/assets/js/15.7b475cef.js"><link rel="prefetch" href="/assets/js/16.2fba18a8.js"><link rel="prefetch" href="/assets/js/17.7ef9a15e.js"><link rel="prefetch" href="/assets/js/18.9d1c7c54.js"><link rel="prefetch" href="/assets/js/19.46bb81dc.js"><link rel="prefetch" href="/assets/js/20.aa392f3a.js"><link rel="prefetch" href="/assets/js/21.c76916a2.js"><link rel="prefetch" href="/assets/js/22.3d1b9696.js"><link rel="prefetch" href="/assets/js/23.10ed8e63.js"><link rel="prefetch" href="/assets/js/24.8db9cbc8.js"><link rel="prefetch" href="/assets/js/25.949ef4e5.js"><link rel="prefetch" href="/assets/js/26.d64eedcc.js"><link rel="prefetch" href="/assets/js/27.622815d1.js"><link rel="prefetch" href="/assets/js/28.6dbf35fb.js"><link rel="prefetch" href="/assets/js/5.bbd5390b.js"><link rel="prefetch" href="/assets/js/8.46271304.js"><link rel="prefetch" href="/assets/js/9.dc4a5b3d.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.dd1bc204.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a7a650b7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/#posts" class="nav-link">
  Posts
</a></div><div class="nav-item"><a href="/#readings" class="nav-link">
  Readings
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Misc" class="dropdown-title"><span class="title">Misc</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/channel-links.html" class="nav-link">
  Playlists
</a></li><li class="dropdown-item"><!----> <a href="/photos/photos.html" class="nav-link">
  Photography
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/#posts" class="nav-link">
  Posts
</a></div><div class="nav-item"><a href="/#readings" class="nav-link">
  Readings
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Misc" class="dropdown-title"><span class="title">Misc</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/channel-links.html" class="nav-link">
  Playlists
</a></li><li class="dropdown-item"><!----> <a href="/photos/photos.html" class="nav-link">
  Photography
</a></li></ul></div></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-astrid-content"><h1 id="shallow-dive-on-microfacet"><a href="#shallow-dive-on-microfacet" class="header-anchor">#</a>
      Shallow Dive on Microfacet
    </h1> <div class="content__default"><p>Physically based rendering is a recent hot area in game theindustry.
Most PBR implementation employs a <em><strong>microfacet model</strong></em> to parameterize the features of the material surface.
Here is a very shallow dive on microfacet.</p> <h2 id="microfacet-model"><a href="#microfacet-model" class="header-anchor">#</a> Microfacet model</h2> <p>In the microfacet model, a surface consists of millions of micro surfaces, with each micro surface being perfectly smooth.
Each micro surface has a normal where only perfect reflection happens.</p> <p><img src="/assets/img/shallow-dive-on-microfacet_half-vector.05bdb983.png" alt="microfacet_visual" loading="lazy"></p> <p>Note that micro surface normals are somewhat related to the &quot;macro&quot; surface normal, but it's not the same.
An incident light to a rough surface will be scattered into different directions by every micro surface it can hit.</p> <p>Normal of the micro surface is called <code>half-vector</code> and denoted by <code>h</code>.
Obviously, <code>h = normalize(l + v)</code> where <code>l</code> is the light direction and <code>v</code> is the view direction.</p> <h2 id="microfacet-formula"><a href="#microfacet-formula" class="header-anchor">#</a> Microfacet formula</h2> <p>A general form of microfacet model</p> <p><img src="/assets/img/shallow-dive-on-microfacet_formula.e1321c2c.png" alt="microfacet_model" loading="lazy"></p> <p>has four terms <strong>diffuse</strong>, <strong>distribution term (D)</strong>, <strong>fresnel term (F)</strong> and <strong>geometry term(G)</strong>.
These four terms are always present for all the microfacet models, while the actual implementation of each term may differ by models.</p> <h2 id="distribution-term"><a href="#distribution-term" class="header-anchor">#</a> Distribution term</h2> <p>Distribution describes how many micro surfaces are hit in the light direction.</p> <h2 id="fresnel-term"><a href="#fresnel-term" class="header-anchor">#</a> Fresnel term</h2> <p>Fresnel term describes the physical phenomenon that for any lit surfaces, the amount of light reflected is related to the incident light angle.</p> <p><img src="/assets/img/shallow-dive-on-microfacet_natural-fresnel.f6402d08.png" alt="fresnel" loading="lazy"></p> <p>In the above real world example, in the nearby area where the angle between view(light) direction and water surface normal is small, transmission (refraction) dominates.
However in the far area where the angle difference is larger, most of the light is reflected.</p> <h2 id="geometry-term"><a href="#geometry-term" class="header-anchor">#</a> Geometry term</h2> <p>Geometry term measures the amount of incident light and light reflected from micro surfaces that in the end is blocked by other micro surfaces.</p> <p><img src="/assets/img/shallow-dive-on-microfacet_v-shape.0487225b.png" alt="shadow_mask" loading="lazy"></p> <p>See the above deep v-shaped micro surfaces, some incident light is blocked which causes part of the surface in shadow, and some reflected light is masked by the surface itself as well.</p> <h2 id="well-known-microfacet-models"><a href="#well-known-microfacet-models" class="header-anchor">#</a> Well-known microfacet models</h2> <ul><li><a href="https://ieeexplore.ieee.org/document/1138991/" target="_blank" rel="noopener noreferrer">Smith Geometrical shadow<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> an old and successful geometry shadow-mask model, adopted by a lot of recent PBR models.</li> <li><a href="http://www1.cs.columbia.edu/CAVE/publications/pdfs/Oren_SIGGRAPH94.pdf" target="_blank" rel="noopener noreferrer">Oren Nayar Diffuse<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> an improvement over the traditional Lambert diffuse model.</li> <li><a href="https://onlinelibrary.wiley.com/doi/abs/10.1111/1467-8659.1330233" target="_blank" rel="noopener noreferrer">Schlick<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> famous for its approximation on fresnel and geometry terms, well adopted model.</li> <li><a href="https://www.cs.cornell.edu/~srm/publications/EGSR07-btdf.html" target="_blank" rel="noopener noreferrer">GGX<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> extends microfacet BRDF to refraction and transmission. It introduces a new GGX distribution term together with a geometry term which is based on the Smith's model mentioned above. (Note a very good, self-contained paper)</li> <li><a href="https://disney-animation.s3.amazonaws.com/library/s2012_pbs_disney_brdf_notes_v2.pdf" target="_blank" rel="noopener noreferrer">Disney Principle<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is a mix of GGX model and Schlick mode with its new diffuse term. It is adopted by Blender and seems to be the industrial standard.</li></ul> <h2 id="reference"><a href="#reference" class="header-anchor">#</a> Reference</h2> <ul><li><a href="http://simonstechblog.blogspot.com/2011/12/microfacet-brdf.html" target="_blank" rel="noopener noreferrer">http://simonstechblog.blogspot.com/2011/12/microfacet-brdf.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://disney-animation.s3.amazonaws.com/library/s2012_pbs_disney_brdf_notes_v2.pdf" target="_blank" rel="noopener noreferrer">https://disney-animation.s3.amazonaws.com/library/s2012_pbs_disney_brdf_notes_v2.pdf<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.cs.cornell.edu/~srm/publications/EGSR07-btdf.html" target="_blank" rel="noopener noreferrer">https://www.cs.cornell.edu/~srm/publications/EGSR07-btdf.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://www1.cs.columbia.edu/CAVE/publications/pdfs/Oren_SIGGRAPH94.pdf" target="_blank" rel="noopener noreferrer">http://www1.cs.columbia.edu/CAVE/publications/pdfs/Oren_SIGGRAPH94.pdf<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://ieeexplore.ieee.org/document/1138991/" target="_blank" rel="noopener noreferrer">https://ieeexplore.ieee.org/document/1138991/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://onlinelibrary.wiley.com/doi/abs/10.1111/1467-8659.1330233" target="_blank" rel="noopener noreferrer">https://onlinelibrary.wiley.com/doi/abs/10.1111/1467-8659.1330233<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated by lujc:</span> <span class="time">6/7/2020, 7:19:42 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.16e6993d.js" defer></script><script src="/assets/js/6.5200d407.js" defer></script><script src="/assets/js/1.ed51565e.js" defer></script><script src="/assets/js/2.7fd9a54f.js" defer></script><script src="/assets/js/7.2a97dcdd.js" defer></script>
  </body>
</html>
