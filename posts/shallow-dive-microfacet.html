<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Shallow Dive on Microfacet | HOME</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.191b4c88.css" as="style"><link rel="preload" href="/assets/js/app.569560dd.js" as="script"><link rel="preload" href="/assets/js/6.ccbe0cbc.js" as="script"><link rel="preload" href="/assets/js/1.170dab26.js" as="script"><link rel="preload" href="/assets/js/2.b127bbed.js" as="script"><link rel="preload" href="/assets/js/7.017d568d.js" as="script"><link rel="prefetch" href="/assets/js/10.ee6761ea.js"><link rel="prefetch" href="/assets/js/11.6a0e0b30.js"><link rel="prefetch" href="/assets/js/12.04bd0c07.js"><link rel="prefetch" href="/assets/js/13.a924e565.js"><link rel="prefetch" href="/assets/js/14.572e7b3d.js"><link rel="prefetch" href="/assets/js/5.508fae8d.js"><link rel="prefetch" href="/assets/js/8.428307bf.js"><link rel="prefetch" href="/assets/js/9.82b87a79.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.43af6ada.js">
    <link rel="stylesheet" href="/assets/css/0.styles.191b4c88.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">HOME</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Posts
</a></div><div class="nav-item"><a href="/photos/photos.html" class="nav-link">
  Photos
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Posts
</a></div><div class="nav-item"><a href="/photos/photos.html" class="nav-link">
  Photos
</a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-astrid-content"><h1 id="shallow-dive-on-microfacet"><a href="#shallow-dive-on-microfacet" class="header-anchor">#</a>
      Shallow Dive on Microfacet
    </h1> <div class="content__default"><p>Physcial based rendering is a recent hot area in game industry.
Most PBR implementation employs a <em><strong>microfacet model</strong></em> to parameterize the features of material surface.
Here is a very shallow dive on microfacet.</p> <h2 id="microfacet-model"><a href="#microfacet-model" class="header-anchor">#</a> Microfacet model</h2> <p>In microfacet model, a surface consists of millions of micro surfaces, with each micro surface being perfectly smooth.
Each micro surface has a normal where only perfect reflection happens.</p> <p><img src="/assets/img/shallow-dive-on-microfacet_half-vector.05bdb983.png" alt="microfacet_visual"></p> <p>Note that micro surface normals is somewhat related to the &quot;macro&quot; surface normal, but it's not the same.
An incident light to a rought surface will be scattered into different directions by every micro surface it can hit.</p> <p>Normal of micro surface is called <code>half-vector</code> and denoted by <code>h</code>.
Obviously, <code>h = normalize(l + v)</code> where <code>l</code> is the light direction and <code>v</code> is the view direction.</p> <h2 id="microfacet-formula"><a href="#microfacet-formula" class="header-anchor">#</a> Microfacet formula</h2> <p>A general form of microfacet model</p> <p><img src="/assets/img/shallow-dive-on-microfacet_formula.e1321c2c.png" alt="microfacet_model"></p> <p>has four terms <strong>diffuse</strong>, <strong>distribution term (D)</strong>, <strong>fresnel term (F)</strong> and <strong>geometry term(G)</strong>.
These four terms are always present for all the microfacet models, while the actual implementation of each term may differ by models.</p> <h2 id="distribution-term"><a href="#distribution-term" class="header-anchor">#</a> Distribution term</h2> <p>Distribution describes how many micro surfaces are hit in the light direction.</p> <h2 id="fresnel-term"><a href="#fresnel-term" class="header-anchor">#</a> Fresnel term</h2> <p>Fresnel term describes the physcial phenomenon that for any lit sufaces, the amout of light get reflected is related to the incident light angle.</p> <p><img src="/assets/img/shallow-dive-on-microfacet_natural-fresnel.f6402d08.png" alt="fresnel"></p> <p>In the above real world example, in the nearby area where the angle between view(light) direction and water surface normal is small, transmission (refraction) dominates.
However in the far area where the angle difference is larger, most of the light is reflected.</p> <h2 id="geometry-term"><a href="#geometry-term" class="header-anchor">#</a> Geometry term</h2> <p>Geometry term measures the amout of indicent light and light reflected from micro surfaces that in the end is blocked by other micro surfaces.</p> <p><img src="/assets/img/shallow-dive-on-microfacet_v-shape.0487225b.png" alt="shadow_mask"></p> <p>See the above deep v-shaped micro surfaces, some incident light is blocked which causes part of the surface in shadow, and some reflected light are mask by surface itself as well.</p> <h2 id="well-known-microfacet-models"><a href="#well-known-microfacet-models" class="header-anchor">#</a> Well-known microfacet models</h2> <ul><li><a href="https://ieeexplore.ieee.org/document/1138991/" target="_blank" rel="noopener noreferrer">Smith Geometrical shadow<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> an old and succesful geometry shadow-mask model, adopted by a lot of recent PBR models.</li> <li><a href="http://www1.cs.columbia.edu/CAVE/publications/pdfs/Oren_SIGGRAPH94.pdf" target="_blank" rel="noopener noreferrer">Oren Nayar Diffuse<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> an improvement over traditional Lambert diffuse model.</li> <li><a href="https://onlinelibrary.wiley.com/doi/abs/10.1111/1467-8659.1330233" target="_blank" rel="noopener noreferrer">Schlick<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> famous for its approximation on fresnel and geommetry terms, well adoped moddel.</li> <li><a href="https://www.cs.cornell.edu/~srm/publications/EGSR07-btdf.html" target="_blank" rel="noopener noreferrer">GGX<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> extends microfacet BRDF to refraction and transmission. It introduces a new GGX distribution term together with a geometry term which is based on the Smith's model mentioned above. (Note a very good, self-contained paper)</li> <li><a href="https://disney-animation.s3.amazonaws.com/library/s2012_pbs_disney_brdf_notes_v2.pdf" target="_blank" rel="noopener noreferrer">Disney Principle<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is a mix of GGX model and Schlick mode with its new diffuse term. It is adoped by Blender and seems to be the industrial standard.</li></ul> <h2 id="reference"><a href="#reference" class="header-anchor">#</a> Reference</h2> <ul><li><a href="http://simonstechblog.blogspot.com/2011/12/microfacet-brdf.html" target="_blank" rel="noopener noreferrer">http://simonstechblog.blogspot.com/2011/12/microfacet-brdf.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://disney-animation.s3.amazonaws.com/library/s2012_pbs_disney_brdf_notes_v2.pdf" target="_blank" rel="noopener noreferrer">https://disney-animation.s3.amazonaws.com/library/s2012_pbs_disney_brdf_notes_v2.pdf<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.cs.cornell.edu/~srm/publications/EGSR07-btdf.html" target="_blank" rel="noopener noreferrer">https://www.cs.cornell.edu/~srm/publications/EGSR07-btdf.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://www1.cs.columbia.edu/CAVE/publications/pdfs/Oren_SIGGRAPH94.pdf" target="_blank" rel="noopener noreferrer">http://www1.cs.columbia.edu/CAVE/publications/pdfs/Oren_SIGGRAPH94.pdf<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://ieeexplore.ieee.org/document/1138991/" target="_blank" rel="noopener noreferrer">https://ieeexplore.ieee.org/document/1138991/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://onlinelibrary.wiley.com/doi/abs/10.1111/1467-8659.1330233" target="_blank" rel="noopener noreferrer">https://onlinelibrary.wiley.com/doi/abs/10.1111/1467-8659.1330233<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated by lujc:</span> <span class="time">6/5/2020, 2:21:39 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.569560dd.js" defer></script><script src="/assets/js/6.ccbe0cbc.js" defer></script><script src="/assets/js/1.170dab26.js" defer></script><script src="/assets/js/2.b127bbed.js" defer></script><script src="/assets/js/7.017d568d.js" defer></script>
  </body>
</html>
