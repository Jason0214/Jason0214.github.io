<!doctype html><html lang=en><head><meta charset=utf-8><meta content=no-referrer name=referrer><meta content="width=device-width,initial-scale=1.0,maximum-scale=5" name=viewport><title>Setup Beagle Bone | Jiacheng's Mini Blog</title><meta content="Setup Beagle Bone | Jiacheng's Mini Blog" property=og:title><meta content="Setup Beagle Bone | Jiacheng's Mini Blog" name=twitter:title><meta content="Instructions on setting up development environment on Beagle Bone, in case I forget it again." name=description><meta content="Instructions on setting up development environment on Beagle Bone, in case I forget it again." property=og:description><meta content="Instructions on setting up development environment on Beagle Bone, in case I forget it again." name=twitter:description><meta content="Jiacheng's Mini Blog" property=og:site_name><meta content=https://jason0214.github.io property=og:url><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href=https://jason0214.github.io/base.css rel=stylesheet><link href=https://fonts.googleapis.com rel=preconnect><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel=stylesheet><link href=https://jason0214.github.io/fontawesome/fontawesome.css rel=stylesheet><link href=https://jason0214.github.io/fontawesome/brands.css rel=stylesheet><link href=https://jason0214.github.io/fontawesome/solid.css rel=stylesheet><link href=https://jason0214.github.io/favicon.ico rel=icon type=image/x-icon><body><a class="skip-link p-screen-reader-text" href=#main>Skip to content</a><header class=l-header><h1 class="c-title p-title"><a class=p-title__link href=https://jason0214.github.io>Jiacheng's Mini Blog</a></h1><p class=p-subtitle>Less tech, more life</header><main class=l-main id=main><article class=p-article><header><h1>Setup Beagle Bone</h1><div><div class=c-time><time datetime=" 2020-06-14"> 2020-06-14 </time> - (1 min read)</div></div></header><section class=p-article__body id=js-article><p>Instructions on setting up development environment on Beagle Bone, in case I forget it again.</p><span id=continue-reading></span><h3 id=check-usb-connection>Check USB connection<a aria-label="Anchor link for: check-usb-connection" class=zola-anchor href=#check-usb-connection><i class="fas fa-link"></i></a></h3><p>First, verify the USB connection<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>$</span><span> usb-devices
</span></code></pre><p>If it's good, something similar to the following will show up<pre class=language-log data-lang=log style=color:#c0c5ce;background-color:#2b303b><code class=language-log data-lang=log><span>T:  Bus=01 Lev=01 Prnt=01 Port=01 Cnt=02 Dev#=  4 Spd=12  MxCh= 0
</span><span>D:  Ver= 1.10 Cls=ef(misc ) Sub=02 Prot=01 MxPS=64 #Cfgs=  1
</span><span>P:  Vendor=1d6b ProdID=0104 Rev=04.04
</span><span>S:  Manufacturer=Seeed
</span><span>S:  Product=BeagleBoneGreen
</span></code></pre><p>Alternatively you can check the kernel log<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>$</span><span> dmesg | </span><span style=color:#bf616a>grep</span><span> usb
</span></code></pre><p>Example result:<pre class=language-log data-lang=log style=color:#c0c5ce;background-color:#2b303b><code class=language-log data-lang=log><span>[  841.388142] usb 1-2: New USB device found, idVendor=1d6b, idProduct=0104
</span><span>[  841.388144] usb 1-2: New USB device strings: Mfr=3, Product=4, SerialNumber=5
</span><span>[  841.388146] usb 1-2: Product: BeagleBoneGreen
</span><span>[  841.388147] usb 1-2: Manufacturer: Seeed
</span><span>[  841.388148] usb 1-2: SerialNumber: BBG217071901
</span></code></pre><h3 id=serial-port-over-usb>Serial Port over USB<a aria-label="Anchor link for: serial-port-over-usb" class=zola-anchor href=#serial-port-over-usb><i class="fas fa-link"></i></a></h3><p>Find the <code>tty</code> corresponding to Serial over USB by checking kernel log<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>$</span><span> dmesg | </span><span style=color:#bf616a>grep</span><span> tty
</span></code></pre><p>e.g. found <code>ttyACM0</code><pre class=language-log data-lang=log style=color:#c0c5ce;background-color:#2b303b><code class=language-log data-lang=log><span>[    5.901768] cdc_acm 1-2:1.2: ttyACM0: USB ACM device
</span></code></pre><p>Connect through Serial Port<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>$</span><span> sudo screen /dev/ttyACM0 115200
</span></code></pre><p>Frequently used Serial instructions:<ul><li>Show help: <code>Control a + (no control) ?</code><li>Exit: <code>Control a + (no control) \</code></ul><h3 id=ethernet-over-usb>Ethernet over USB<a aria-label="Anchor link for: ethernet-over-usb" class=zola-anchor href=#ethernet-over-usb><i class="fas fa-link"></i></a></h3><p>Execute <code>ifconfig</code> on both Beagle Bone and your Host device to check the IPs and interfaces of Ethernet over USB.<p>Seems by default, Beagle Bone and Host are under the subnet <code>192.168.7.0/24</code>, with Beagle Bone having IP address <code>192.168.7.2</code> and Host having IP address <code>192.168.7.1</code>.<h3 id=route-beagle-bone-network-traffic-on-host>Route Beagle Bone network traffic on Host<a aria-label="Anchor link for: route-beagle-bone-network-traffic-on-host" class=zola-anchor href=#route-beagle-bone-network-traffic-on-host><i class="fas fa-link"></i></a></h3><h4 id=on-beagle-bone>On Beagle Bone<a aria-label="Anchor link for: on-beagle-bone" class=zola-anchor href=#on-beagle-bone><i class="fas fa-link"></i></a></h4><p>Route all traffic to Host (IP <code>192.168.7.1</code>)<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>$</span><span> sudo ip route add default via 192.168.7.1
</span></code></pre><h4 id=on-host>On Host<a aria-label="Anchor link for: on-host" class=zola-anchor href=#on-host><i class="fas fa-link"></i></a></h4><p>Find <code>&lt;Beagle Bone interface></code> and <code>&lt;Host network interface></code> through <code>ifconfig</code><p>Enable IP layer forward<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>$</span><span> sudo sysctl</span><span style=color:#bf616a> -w</span><span> net.ipv4.ip_forward=1
</span></code></pre><p>Add NAT rule<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>$</span><span> sudo iptables</span><span style=color:#bf616a> -A</span><span> FORWARD</span><span style=color:#bf616a> --in-interface </span><span>&lt;Beagle Bone interface> -j ACCEPT
</span><span style=color:#bf616a>$</span><span> sudo iptables</span><span style=color:#bf616a> -t</span><span> nat</span><span style=color:#bf616a> -A</span><span> POSTROUTING</span><span style=color:#bf616a> --out-interface </span><span>&lt;Host network interface> -j MASQUERADE
</span></code></pre><h3 id=dns-server>DNS server<a aria-label="Anchor link for: dns-server" class=zola-anchor href=#dns-server><i class="fas fa-link"></i></a></h3><p>Prepend DNS server address to <code>resolv.conf</code><pre style=color:#c0c5ce;background-color:#2b303b><code><span>$ sudo sed -i '1inameserver 8\.8\.8\.8' /etc/resolv.conf
</span></code></pre></section><footer><nav class="c-pagination p-pagination"><div class=c-pagination__ctrl><div class=c-pagination__newer></div><div class=c-pagination__older></div></div></nav></footer></article></main><footer class=l-footer><p class=p-copyright></footer>